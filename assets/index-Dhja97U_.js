import{b as V,l as ve,_ as ge,$ as he,r as w,c as i,s as ye,w as F,o as be,m as I,p as h,I as f,G as J,J as l,u as a,M as E,S as we,O as Ie,n as u,B as x,R as Q,a0 as Ee}from"./vue.esm-bundler-BWLFJ3YM.js";import{a as xe}from"./index-Clbg1Cmp.js";import{_ as C}from"./Icon-XKrN76pS.js";import{u as Ce,b as Se}from"./index-CdJoONYj.js";import{o as ke,h as S,l as Pe,v as Be,w as Me}from"./ConfigProvider-DfgpcNWx.js";import{U as L}from"./event-BB_Ol6Sd.js";import{u as Ve}from"./index-lmL9CkRO.js";import{m as Fe}from"./typescript-Bp3YSIOJ.js";import{u as Ne,a as Le}from"./index-GlymeP5r.js";import{u as Te,a as Re}from"./index-C63O9-vN.js";import{d as N}from"./error-Cq9Fpw4b.js";import{u as Ae}from"./use-form-common-props-0yetkxkH.js";const $e=ke({id:{type:String,default:void 0},helpText:{type:String,default:void 0},loading:{type:Boolean,default:!1},label:{type:String,default:void 0},messageError:{type:String,default:void 0},disabled:Boolean,modelValue:{type:S([String,Number,Object]),default:""},maxlength:{type:[String,Number],default:50},minlength:{type:[String,Number]},type:{type:String,default:"text"},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:S(String),default:""},prefixIcon:{type:S(String),default:""},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},isEvent:{type:Boolean,default:!1},inputStyle:{type:S([Object,Array,String]),default:()=>Fe({})},autofocus:Boolean,...Ve(["ariaLabel"])}),De={[L]:s=>V(s),click:s=>s instanceof MouseEvent,input:s=>V(s),change:s=>V(s),focus:s=>s instanceof FocusEvent,blur:s=>s instanceof FocusEvent,clear:()=>!0,mouseleave:s=>s instanceof MouseEvent,mouseenter:s=>s instanceof MouseEvent,keydown:s=>s instanceof Event,compositionstart:s=>s instanceof CompositionEvent,compositionupdate:s=>s instanceof CompositionEvent,compositionend:s=>s instanceof CompositionEvent},Oe=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role"],T=ve({name:"Input",inheritAttrs:!1,__name:"Input",props:$e,emits:De,setup(s,{expose:X,emit:Y}){Ee(e=>({"60aca650":P.value}));const t=s,r=Y,o=Pe("input"),R=ge(),Z=Ne(),k=he(),P=w(void 0),B=w(null),{formItem:c}=Se(),y=i(()=>c?.shouldShowErrorChild||!!t?.messageError),_=i(()=>t?.messageError?t.messageError:c?.validateMessage),ee=i(()=>[o.b(),o.is("label",!!t.label),o.is("disabled",v.value),o.is("focus",M.value),o.is("complete",!M.value&&!!d.value),o.is("disabled",v.value),o.is("exceed",re.value),o.is("error",y.value||c?.shouldShowError),o.is("event",t.isEvent),o.is("loading",t.loading),o.is("readonly",t.readonly),{[o.m("prefix")]:t.prefixIcon||k.prefix,[o.m("suffix")]:k.suffix||t.suffixIcon||t.showPassword,[o.is("password")]:t.showPassword,[o.b("hidden")]:t.type==="hidden"},R.class]),te=i(()=>[o.e("help-text"),{[o.e("help-error")]:y.value}]),{inputId:oe}=Ce(t,{formItemContext:c}),v=Ae(),p=ye(),A=w(!1),b=w(!1),$=i(()=>p.value),{wrapperRef:ae,isFocused:M}=Te(p,{beforeFocus(){return v.value},afterBlur(){t.validateEvent&&c?.validate?.("blur").catch(e=>N())}}),se=i(()=>b.value?"regular eye":"regular eye-slash"),ne=i(()=>[R.style]),d=i(()=>Be(t.modelValue)?"":String(t.modelValue)),D=i(()=>t.showWordLimit&&!!t.maxlength&&t.type==="text"&&!v.value&&!t.readonly&&!t.showPassword),O=i(()=>d.value.length),re=i(()=>!!D.value&&O.value>Number(t.maxlength));i(()=>!!t.suffixIcon||t.showPassword);const[H,K]=Le(p),g=()=>{const e=$.value,n=t.formatter?t.formatter(d.value):d.value;!e||e.value===n||(e.value=n)},W=async e=>{H();let{value:n}=e.target;if(t.formatter&&(n=t.parser?t.parser(n):n),!z.value){if(n===d.value){g();return}r(L,n),r("input",n),await Q(),g(),K()}},ie=e=>{r("change",e.target.value)},{isComposing:z,handleCompositionStart:G,handleCompositionUpdate:U,handleCompositionEnd:j}=Re({emit:r,afterComposition:W}),q=()=>{H(),b.value=!b.value,setTimeout(K)},le=()=>p.value?.focus(),ue=()=>p.value?.blur(),pe=e=>{A.value=!1,r("mouseleave",e)},de=e=>{A.value=!0,r("mouseenter",e)},me=e=>{r("keydown",e)},ce=()=>{p.value?.select()},fe=()=>{r(L,""),r("change",""),r("clear"),r("input","")};return F(()=>t.modelValue,()=>{t.validateEvent&&c?.validate?.("change").catch(e=>N())}),F(d,()=>g()),F(()=>t.type,async()=>{await Q(),g()}),be(()=>{!t.formatter&&t.parser&&N(o.b()),g()}),xe(B,()=>{if(!t.prefixIcon&&!k.prefix){P.value="0";return}requestAnimationFrame(()=>{const e=B.value?.getBoundingClientRect().width;P.value=`${e}px`})}),X({ref:$,isComposing:z,focus:le,blur:ue,select:ce,clear:fe}),(e,n)=>(u(),I("div",{class:l([ee.value]),style:Ie(ne.value),onMouseenter:de,onMouseleave:pe},[h("div",{ref_key:"wrapperRef",ref:ae,class:l(a(o).e("wrapper")),onClick:n[3]||(n[3]=m=>e.isEvent?r("click",m):void 0)},[h("div",{ref_key:"prefixRef",ref:B,class:l(a(o).e("prefix"))},[J(e.$slots,"prefix",{},()=>[e.prefixIcon?(u(),x(a(C),{key:0,class:l([a(o).e("icon"),a(o).e("prefix-icon")]),name:e.prefixIcon},null,8,["class","name"])):f("",!0)])],2),e.label?(u(),I("div",{key:0,class:l([a(o).e("label"),{"dynamic-label":!d.value||!a(M)}])},E(e.label),3)):f("",!0),h("input",we({id:a(oe),ref_key:"input",ref:p,class:[a(o).e("inner")]},a(Z),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?b.value?"text":"password":e.type,disabled:a(v),readonly:e.readonly||e.loading||e.isEvent,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:n[0]||(n[0]=(...m)=>a(G)&&a(G)(...m)),onCompositionupdate:n[1]||(n[1]=(...m)=>a(U)&&a(U)(...m)),onCompositionend:n[2]||(n[2]=(...m)=>a(j)&&a(j)(...m)),onInput:W,onChange:ie,onKeydown:me}),null,16,Oe),J(e.$slots,"suffix",{},()=>[h("span",{class:l(a(o).e("suffix"))},[e.suffixIcon&&!e.showPassword&&!e.loading?(u(),x(a(C),{key:0,class:l([a(o).e("icon"),a(o).e("suffix-icon")]),name:e.suffixIcon},null,8,["class","name"])):f("",!0),e.showPassword?(u(),x(a(C),{key:1,class:l([a(o).e("icon"),a(o).e("icon-password")]),name:se.value,onClick:q},null,8,["class","name"])):f("",!0),e.loading?(u(),x(a(C),{key:2,class:l([a(o).e("icon"),a(o).e("icon-loading")]),name:"regular arrows-rotate",spin:"",onClick:q},null,8,["class"])):f("",!0)],2)])],2),h("div",{class:l(a(o).e("help"))},[(u(),I("p",{key:y.value?"error":"help",class:l(te.value)},E(y.value?_.value:e.helpText),3)),D.value?(u(),I("span",{key:0,class:l(a(o).e("help-count"))},E(O.value)+"/"+E(e.maxlength),3)):f("",!0)],2)],38))}});T.__docgenInfo={name:"Input",exportName:"default",displayName:"Input",description:"",tags:{},expose:[{name:"ref",tags:[{title:"description",content:"HTML element, input or textarea"}]},{name:"isComposing",tags:[{title:"description",content:"is input composing"}]},{name:"focus",tags:[{title:"description",content:"HTML input element native method"}]},{name:"blur",tags:[{title:"description",content:"HTML input element native method"}]},{name:"select",tags:[{title:"description",content:"HTML input element native method"}]},{name:"clear",tags:[{title:"description",content:"clear input value"}]}],slots:[{name:"prefix"},{name:"suffix"}],sourceFiles:["/home/runner/work/b2b-ui-framework/b2b-ui-framework/components/Input/src/Input.vue"]};const _e=Me(T,{Input:T});export{_e as G};
