import{l as N,f as Y,r as i,c as H,V as Q,x as $,B as O,n as R,C as q,a1 as Z,p as x,J as B,u as y,O as M,a2 as ee,U as te,m as X,T as j,K as ae,w as U,W as le,a as oe,a7 as se,o as re,R as V,a8 as ne,I as ie,G as ue,Y as ce,Q as ve}from"./vue.esm-bundler-BWLFJ3YM.js";import{u as A,a as fe}from"./index-BjLWKBtf.js";import{B as me,r as de,G as C}from"./util-B2mB0_6C.js";import{o as W,l as F,b as pe,i as L,h as be,w as he}from"./ConfigProvider-DfgpcNWx.js";import{_ as D}from"./plugin-vue_export-helper-CqGSI99y.js";import{t as ye}from"./error-Cq9Fpw4b.js";import{u as we}from"./index-lmL9CkRO.js";import{b as G}from"./style-BhjGsvQW.js";const K=Symbol("scrollbarContextKey"),Se=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ge="Thumb",ze=N({__name:"thumb",props:Se,setup(_){const v=_,n=Y(K),l=F("scrollbar");n||ye(ge,"can not inject scrollbar context");const r=i(),u=i(),m=i({}),d=i(!1);let f=!1,p=!1,a=pe?document.onselectstart:null;const t=H(()=>me[v.vertical?"vertical":"horizontal"]),o=H(()=>de({size:v.size,move:v.move,bar:t.value})),c=H(()=>r.value[t.value.offset]**2/n.wrapElement[t.value.scrollSize]/v.ratio/u.value[t.value.offset]),b=s=>{var z;if(s.stopPropagation(),s.ctrlKey||[1,2].includes(s.button))return;(z=window.getSelection())==null||z.removeAllRanges(),S(s);const T=s.currentTarget;T&&(m.value[t.value.axis]=T[t.value.offset]-(s[t.value.client]-T.getBoundingClientRect()[t.value.direction]))},E=s=>{if(!u.value||!r.value||!n.wrapElement)return;const z=Math.abs(s.target.getBoundingClientRect()[t.value.direction]-s[t.value.client]),T=u.value[t.value.offset]/2,k=(z-T)*100*c.value/r.value[t.value.offset];n.wrapElement[t.value.scroll]=k*n.wrapElement[t.value.scrollSize]/100},S=s=>{s.stopImmediatePropagation(),f=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",h),a=document.onselectstart,document.onselectstart=()=>!1},w=s=>{if(!r.value||!u.value||f===!1)return;const z=m.value[t.value.axis];if(!z)return;const T=(r.value.getBoundingClientRect()[t.value.direction]-s[t.value.client])*-1,k=u.value[t.value.offset]-z,J=(T-k)*100*c.value/r.value[t.value.offset];n.wrapElement[t.value.scroll]=J*n.wrapElement[t.value.scrollSize]/100},h=()=>{f=!1,m.value[t.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",h),e(),p&&(d.value=!1)},P=()=>{p=!1,d.value=!!v.size},g=()=>{p=!0,d.value=f};Q(()=>{e(),document.removeEventListener("mouseup",h)});const e=()=>{document.onselectstart!==a&&(document.onselectstart=a)};return A($(n,"scrollbarElement"),"mousemove",P),A($(n,"scrollbarElement"),"mouseleave",g),(s,z)=>(R(),O(te,{name:y(l).b("fade"),persisted:""},{default:q(()=>[Z(x("div",{ref_key:"instance",ref:r,class:B([y(l).e("bar"),y(l).is(y(t).key)]),onMousedown:E},[x("div",{ref_key:"thumb",ref:u,class:B(y(l).e("thumb")),style:M(y(o)),onMousedown:b},null,38)],34),[[ee,s.always||d.value]])]),_:1},8,["name"]))}});var I=D(ze,[["__file","thumb.vue"]]);const _e=W({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ee=N({__name:"bar",props:_e,setup(_,{expose:v}){const n=_,l=Y(K),r=i(0),u=i(0),m=i(""),d=i(""),f=i(1),p=i(1);return v({handleScroll:o=>{if(o){const c=o.offsetHeight-C,b=o.offsetWidth-C;u.value=o.scrollTop*100/c*f.value,r.value=o.scrollLeft*100/b*p.value}},update:()=>{const o=l?.wrapElement;if(!o)return;const c=o.offsetHeight-C,b=o.offsetWidth-C,E=c**2/o.scrollHeight,S=b**2/o.scrollWidth,w=Math.max(E,n.minSize),h=Math.max(S,n.minSize);f.value=E/(c-E)/(w/(c-w)),p.value=S/(b-S)/(h/(b-h)),d.value=w+C<c?`${w}px`:"",m.value=h+C<b?`${h}px`:""}}),(o,c)=>(R(),X(ae,null,[j(I,{move:r.value,ratio:p.value,size:m.value,always:o.always},null,8,["move","ratio","size","always"]),j(I,{move:u.value,ratio:f.value,size:d.value,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var Te=D(Ee,[["__file","bar.vue"]]);const Ce=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:be([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...we(["ariaLabel","ariaOrientation"])}),He={scroll:({scrollTop:_,scrollLeft:v})=>[_,v].every(L)},Le="ElScrollbar",Re=N({name:Le}),Be=N({...Re,props:Ce,emits:He,setup(_,{expose:v,emit:n}){const l=_,r=F("scrollbar");let u,m,d=0,f=0;const p=i(),a=i(),t=i(),o=i(),c=H(()=>{const e={};return l.height&&(e.height=G(l.height)),l.maxHeight&&(e.maxHeight=G(l.maxHeight)),[l.wrapStyle,e]}),b=H(()=>[l.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!l.native}]),E=H(()=>[r.e("view"),l.viewClass]),S=()=>{var e;a.value&&((e=o.value)==null||e.handleScroll(a.value),d=a.value.scrollTop,f=a.value.scrollLeft,n("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))};function w(e,s){ve(e)?a.value.scrollTo(e):L(e)&&L(s)&&a.value.scrollTo(e,s)}const h=e=>{L(e)&&(a.value.scrollTop=e)},P=e=>{L(e)&&(a.value.scrollLeft=e)},g=()=>{var e;(e=o.value)==null||e.update()};return U(()=>l.noresize,e=>{e?(u?.(),m?.()):({stop:u}=fe(t,g),m=A("resize",g))},{immediate:!0}),U(()=>[l.maxHeight,l.height],()=>{l.native||V(()=>{var e;g(),a.value&&((e=o.value)==null||e.handleScroll(a.value))})}),le(K,oe({scrollbarElement:p,wrapElement:a})),se(()=>{a.value&&(a.value.scrollTop=d,a.value.scrollLeft=f)}),re(()=>{l.native||V(()=>{g()})}),ne(()=>g()),v({wrapRef:a,update:g,scrollTo:w,setScrollTop:h,setScrollLeft:P,handleScroll:S}),(e,s)=>(R(),X("div",{ref_key:"scrollbarRef",ref:p,class:B(y(r).b())},[x("div",{ref_key:"wrapRef",ref:a,class:B(y(b)),style:M(y(c)),tabindex:e.tabindex,onScroll:S},[(R(),O(ce(e.tag),{id:e.id,ref_key:"resizeRef",ref:t,class:B(y(E)),style:M(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:q(()=>[ue(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?ie("v-if",!0):(R(),O(Te,{key:0,ref_key:"barRef",ref:o,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ne=D(Be,[["__file","scrollbar.vue"]]);const Ke=he(Ne);export{Ke as E};
